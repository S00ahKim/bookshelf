# 02. 대규모 데이터 처리 입문
> 대규모 데이터란 무엇인가?

### 대규모 데이터의 어려운 점
> 너무 많은 데이터가 있는 경우에는 id를 지정해서 검색해도 인덱스를 타지 않으면 **시간이 너무 오래 걸린다**.
1. [탐색 속도가 느리다] 메모리 내에서 계산할 수 없다.
    * 디스크를 읽는 것은 메모리에 비해 10만~100만 배 정도의 차이가 난다. (마이크로초 vs 수 밀리초)
    * 메모리는 전기적 부품이지만, 디스크는 원반을 회전하는 등 물리적 동작을 요하기 때문이다. (ㄱ-ㄴ-ㄷ 있을 때, ㄴ 찾고 ㄱ 찾으려면 한바퀴 돌아야 함)
2. [전송 속도도 느리다]
    * 메모리든 디스크든 CPU와 버스로 연결됨
    * 메모리-CPU 간 버스는 빠른 속도 / 디스크-CPU 간 버스는 느린 속도 (100배 이상 차이)
    * 회전하지 않는 SSD의 경우 탐색은 좀 빠르지만, 전송 속도 때문에 메모리만큼의 속도가 안 나옴
- 단일 서버에서 효율적으로 운용한 뒤에 다중 서버의 부하 분산이 의미를 가짐
- 병목 규명은 load average 확인 -> CPU와 I/O 중 병목 원인을 조사
    * CPU 병목
        + 다른 부분은 문제가 없는데 CPU 처리량이 많음 -> `서버 증설` / `로직 개선`
        + 프로그램이 폭주해서 필요 이상의 부하가 발생  -> `오류 제거`
    * I/O 병목
        + 입출력이 많음
        + 스왑 발생으로 디스크 액세스 [참고](https://github.com/S00ahKim/Skill-Inventory/blob/master/OS/09%20Main%20Memory.md#%EC%8A%A4%EC%99%80%ED%95%91)
        + 스왑 없이 디스크 입출력이 많음 = 캐시의 메모리 부족 
        + -> `메모리 증설` / `데이터 분산` / `캐시서버 도입` / `프로그램 개선`
        + 프로그램 오류로 메모리를 지나치게 사용 -> `프로그램 개선`
- 튜닝이란 원래 성능 이상을 내는 것이 아니라, 병목을 제거하여 최대한의 성능을 내게 하는 것


### 서버 규모 확장하기
- 스케일 아웃 > 스케일 업
    * 웹 서비스에 적합한 형태
    * 비용이 저렴
    * 시스템 구성에 유연성이 있음 (필요할 때 적절하게 늘리고 줄이는 빠른 상황 대처 가능)
