# 진화적 아키텍트


## 부정확한 비교
- 아키텍트란?
    * 기술적 비전 확보, 시스템 전달, 기술 리드, ...
    * 소프트웨어 업계에서는 다른 업계에 비해 역사가 짧아 **'좋은 것'을 판단하기 어렵**기 때문에 아키텍트의 역할을 명확히 정의하기 어렵다
    * 타 업계에 비해 **유연한 변화**를 설계에 적용할 필요가 있다


## 아키텍트에 대한 진화적 관점
> "도시 설계자" 추상적인 방향 설정, 특정한 경우에만 구체적으로 관여
- 목적
    * 현재의 목적에 맞는 시스템
    * 미래의 플랫폼으로 적합한 시스템
    * 사용자와 개발자가 똑같이 행복할 수 있는 시스템
- agile
    * 처음부터 완벽한 제품 < 지속적으로 성장하는 제품
    * 특정 시점을 기준으로 고정되는 제품 < 고객 요구에 따라 반응하고 적응하는 제품
    * 미리 계획하기 < 변화를 받아들이기
    * 사용자만을 위한 시스템 < 개발자, 운영자, 유지보수자까지 고려한 시스템


## 구역화
- 아키텍트의 '구역'은 서비스 경계/단위
- 고민해야 할 곳은 구역 `내`의 일보단 구역 `사이`의 일 (ex. 서비스 간 통신)
- 주의: 완전히 독립적으로 운영된다면, 하나의 서비스에 너무 많은 기술이 사용되어 개발자의 경험이 충분하지 못할 수 있음


## 원칙적 접근법
- 시스템 설계의 많은 결정은 `트레이드 오프`이다.
- 어려운 결정에 `구조화`는 도움이 된다.
- 구조화의 좋은 방법은 `목표 기반 원칙과 실천 사항을 정의`하는 것이다.

### 전략적 목표
- 고수준 목표. 기술적이지 않을 수 있음. 기술 비전 역시 조직(비즈니스)의 비전을 파악하여 결정해야 함.
- 회사의 지향점, 고객의 행복을 위해 취할 방법
- ex. 신규 시장 개척을 위해 동남아시아로 영역 확장 / 고객이 셀프서비스를 최대한 많이 사용하게 하자

### 원칙
- 더 큰 목표를 위해 해야 할 일을 정렬하는 규칙. 변경 가능. 제약 포함 가능.
- ex. 출시 시간을 줄이기 위해 출시 팀이 다른 팀과 독립적으로 배포 가능

### 실천 사항
- 원칙을 실행하는 방법. 업무 수행을 위한 자세하고 실질적인 지침. 기술 명세적, 구체적. 잦은 변경.
- ex. 로그 데이터는 중앙으로 수집한다 / 시스템 환경은 centOS만 지원한다

### 원칙 + 실천 사항
- 작은 조직에서는 원칙과 실천 사항이 섞이거나 대체될 수 있다
- 큰 조직은 팀별로 고유의 실천 사항이 상이할 수 있다

### 실제 사례
- 문서 공유: 전략적 목표, 아키텍처 원칙, 설계와 배포의 실천 사항
- 개념을 구체화할 수 있는 예제 코드 작성


## 필수 기준
- 선택들 앞에서 균형을 잡아야 함
- 거시적 시각 & 개별 마이크로서비스 간 자율성 최적화
- 각 서비스가 가져야 할 명확한 속성 정의

### 모니터링
- 개별 시스템 뿐 아니라 전체 시스템에 대한 모니터링(+로깅) 필요
- 통일된 방식 적용
    - 각 서비스가 중앙 저장소에 모니터링 데이터를 푸시하게 하기
    - 각 노드에서 데이터를 가져오는 폴링 시스템

### 인터페이스
- 서비스 간 인터페이스 기술 갯수 가능한 최소화
- ex. 기술, 프로토콜, 네이밍 규칙, 페이지네이션, 엔드포인트 버전, ...

### 아키텍처 안정성
- 하나의 서비스 실패가 전체 시스템 실패로 이어지지 않게
- 비정상적 요청으로부터 보호 (ex. 커넥션 풀, 서킷 브레이커 등)
- 응답 코드가 규칙에 부합


## 코드를 통한 통제
1. 본보기: 읽고 모방할 수 있는, 실제 사용하는 모범적인 시스템 코드
2. 맞춤형 서비스 템플릿: 미리 구현되어 있는 라이브러리 공통 도입
    * ex. 넷플릭스 - 사이드카 서비스
    * 모두가 참여하고 책임질 수 있어야 함


## 기술 부채
- 원인은 다양하다
    * 긴급하게 배포하기 위해 절차를 무시함
    * 변경된 시스템 비전이 이전과 어울리지 않음
- 아키텍트의 역할: 큰 그림을 보고 균형을 이해하기
    * 일반적인 지침 제공, 팀 자체적으로 기술 부채 탐색
    * 정기적으로 기술 부채 관리하며 체계화


## 예외 처리
- 시스템 구축 방법은 기본적으로 원칙과 실천 사항에 기반
- 이에 벗어나게 된다면, 참조할 수 있도록 기록
- 너무 많은 예외가 발견된다면 원칙과 실천 사항을 수정


## 중앙에서의 거버넌스와 지휘
- 아키텍트의 업무: 기술 비전 결정, **기술 거버넌스**
- 거버넌스?
    * 우리의 결과물이 비전과 일치함을 보장 & 필요할 경우 비전을 진화시킴
    * 책임: 원칙을 정하고 팀의 효율성을 떨어뜨리지 않도록 케어하고 다양한 선택을 하고 사람들을 참여시켜야 함
- 팀의 의견이 아키텍트의 의견보다 나을 때도 있다. 그러니 선택과 그에 따라올 작용을 인지하라.


## 팀 만들기
- 기술 비전의 책임과 실현은 아키텍트와 실무자에 대한 문제와 직결됨
- 기술 리더는 팀원들에게 비전을 이해시키고, 성장을 돕고, 비전의 결정과 구현에 적극적으로 참여할 수 있도록 해야 함
- 모놀리식 시스템보다 마이크로서비스에서 개별 개발자에게 좀 더 코드베이스의 소유권을 부여하기 쉬워짐. -> 개인의 성장 & 유지보수 용이성 확보


## 마치며: 진화적 아키텍트의 핵심 책무
> 진화적 아키텍트란 끊임없는 갈등 조정 과정으로 아래 위업이 달성된다는 것을 이해하는 사람이다. 융통성을 가지고 균형을 잡자!

- ✅ 비전: 명료하게 소통되고, 시스템이 고객과 조직의 요구사항을 충족하게 하는 기술 비전이 있는지 확인하라
- ✅ 공감: 고객과 동료에 대한 여러분 결정의 파급력을 이해하라
- ✅ 협업: 비전을 정의하고, 다듬고, 실행하기 위해 가능한 많은 동료와 협업하라
- ✅ 적응성: 기술 비전이 고객과 조직이 요구하는 것을 반영하는지 확인하라
- ✅ 자율성: 여러분 팀의 표준화와 자율성 사이에서 올바른 균형을 찾아내라
- ✅ 거버넌스: 시스템이 기술 비전에 맞게 구현되고 있는지 확인하라