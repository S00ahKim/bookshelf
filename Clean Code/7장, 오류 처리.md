# 오류 처리
> 오류 처리를 프로그램 코드와 분리해 독자적인 사안으로 고려하자
- 오류는 언제든지 발생할 수 있다.
- 오류 처리를 하되, 여기저기 흩어진 오류 처리 코드 때문에 원래 로직을 이해하기 어려운 상황은 피해야 한다.


## 오류 코드보다 예외를 사용하라
- 다중 if 문으로 이상 상태를 처리하게 하지 말라.
- 오류가 발생하면 예외를 던지게 하라.


## try-catch-finally 문부터 작성하라
- 예외가 발생해도 호출자가 기대하는 상태를 정의하기 쉬워진다.
- 팁
    1. 강제로 예외를 발생시키는 테스트 케이스를 작성
    2. 테스트를 통과하도록 코드를 작성


## 미확인 예외를 사용하라
- 예외 타입을 모두 명시하는 것이 좋은 것이라고 여겨졌지만, 꼭 그런 건 아니다.
- 확인된 예외는 OCP를 위반한다. 하위 단계에서 코드를 변경하면 상위 단계 메서드 선언부를 모두 고쳐야 한다.
- 중요한 라이브러리를 개발한다면 모든 예외에 대응해야 한다.


## 예외에 의미를 제공하라
- 전후 상황을 제공하면 오류 발생 원인과 위치 파악에 용이함
- 호출 스택 뿐 아니라, 오류 메시지에 `실패한 메서드 이름, 실패 유형` 언급, catch에서 에러 로깅


## 호출자를 고려해 예외 클래스를 정의하라
- 오류를 분류하는 방법은 많지만, 오류를 잡아내는 방법을 더 중요하게 생각할 것
- 외부 API를 사용할 땐 래핑해서 오류 처리 블록을 하나만 만드는 게 좋음
    * 외부 라이브러리와 프로그램 간 의존성 낯춤 (라이브러리 변경에 용이, 라이브러리 설계에 프로그램이 영향 받는 부분 적음)
    * 테스트하기 쉬움


## 정상 흐름을 정의하라
- 외부 API를 감싸서 독자적 예외를 만들고, 흐름을 중단시켜 예외를 처리하게 하는 것이 항상 좋은 해결법은 아님
- 특수 사례 패턴: 클래스를 만들거나 객체를 조작해 특수 사례를 처리하는 방식
    * 클래스를 갖다 쓰는 쪽에서 예외 처리를 할 필요가 없음


## null을 반환하지 마라
- null을 리턴하는 코드는 나쁘다 : 일거리를 늘림 & 호출자에 문제를 떠넘김
- null 확인이 너무 많은 것은 문제다
- null 대신 예외나 특수 사례 객체를 반환하자 ex. `Collections.emptyList()`


## null을 전달하지 마라
- 정상적인 파라미터로 null이 전달되는 것이 아니면 피하라
- 왜? 대다수 프로그래밍 언어는 호출자가 실수로 넘기는 null을 적절히 처리하는 방법이 없다