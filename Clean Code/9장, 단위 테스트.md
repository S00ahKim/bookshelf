# 단위 테스트


## TDD 법칙
> 모든 케이스를 커버할 수 있다. 하지만 방대한 테스트 코드는 심각한 관리 문제를 유발할 수 있다.
1. 실패하는 단위 테스트를 작성할 때까지 실제 코드를 작성하지 않는다.
2. 컴파일은 실패하지 않고 실행이 실패하는 단위 테스트를 작성한다.
3. 현재 실패하는 테스트를 통과할 정도로만 실제 코드를 작성한다.


## 깨끗한 테스트 코드 유지하기
- 빠른 작업을 위해 테스트를 대강 만드는 것은 없느니만 못하다. 테스트도 유지보수가 필요하다.
- 테스트는 유연성, 유지보수성, 재사용성을 제공한다.
    * 테스트가 없으면 모든 변경은 잠재적 버그다. 
- 깨끗한 테스트 코드: **가독성**
    * 최소의 표현으로 많은 것 나타내기
    * 이해하기 위해 온갖 잡다한 코드를 다 살펴봐야 하는 코드는 나쁘다
    * 좋은 테스트 구성의 예
        1. `build - operate - check` (테스트 자료 만들기, 테스트 자료 조작하기, 조작한 결과 확인하기)
        2. `given - when - then` (주어진 자료, 테스트 상황, 예상된 결과. 위와 유사. 네이밍에 응용 가능)
        3. `template method` 
           + 2번의 given과 when을 부모 클래스에, then을 자식 클래스에 두어 중복을 회피
           + 또는 @Before에 given, when을, @Test에 then을 두는 방식
           + 단지 assert를 여러 번 쓰는 것으로 복잡한 모양을 피할 수 있다
    * 좋은 테스트를 위한 조언
        1. 테스트 당 assert를 한 번만 쓰기
        2. 테스트 당 한 개념만 테스트하기
    * F.I.R.S.T
        1. Fast: 테스트는 빨리 돌아야 한다
        2. Independent: 각 테스트는 서로 의존하면 안 된다. 순서를 신경쓰지 않고 테스트를 마음대로 실행할 수 있어야 한다
        3. Repeatable: 어떤 환경에서도 반복 수행할 수 있어야 한다
        4. Self-Validating: 테스트는 부울 값으로 결과를 내야 한다
        5. Timely: 단위 테스트는 테스트하려는 실제 코드를 구현하기 직전에 구현한다
    * 도메인에 특화된 테스트 언어: assertSubString 처럼 API를 그대로 쓰기보다, 의도에 맞게 한번 래핑한다. `?`
    * 이중 표준: 가독성 > 효율성 (실제 환경에서는 안 되지만, 테스트 때는 괜찮을 수 있다)