# 1부: 화폐 예제
> 우리의 목적은 작동하는 깔끔한 코드를 얻는 것

## TDD 개발 순서와 고려할 것들
1. 재빨리 테스트를 하나 추가한다.
    * 무슨 테스트들이 있어야 하는지 생각한다.
        + 올바른 행위가 무엇인지 일단 생각하는 것
    * 코드에 이렇게 보이면 좋겠다고 생각하고 그대로 인터페이스를 만든다.
        + 인터페이스에 대한 추측은 완벽하지 못하므로 변경은 문제가 아님
        + 테스트는 외부 구현을 테스트해야지 내부 구현에 깊게 관여하지 않게 할 것
    * 복잡한 것 같은 기능은 작은 것부터 시작한다. (나누어서 정복)
    * 기능과 마찬가지로 테스트도 작고 단순할수록 좋다.
    * 예상되는 문제점들은 적어 놓고 나중에 고려한다.
    * 있으면 좋을 것 같은 테스트들은 만들어라.
    * 테스트가 없으면 새로운 코드 추가 or 변경은 없다.
2. 모든 테스트를 실행하고 새로 추가한 것이 실패하는지 확인한다.
3. 코드를 조금 바꾼다.
    * 실제 개발에서는 꼭 그 단계 모두를 밟지 않더라도 작은 단위의 변경을 생각할 수 있어야 함
    * 구린 방법이라도 동원해서 일단 통과하게 만든다.
        + 컴파일만 되도록 껍데기 메소드 만들기
    * 일단 통과시키고 나중에 수습한다.
4. 모든 테스트를 실행하고 전부 성공하는지 확인한다.
    * 뭔가 불확실하면 일단 테스트를 돌릴 것. 생각보다 테스트가 빠르다.
    * 컴파일러의 도움을 받을 것!
5. 리팩토링을 통해 중복을 제거한다.
    * ex. 팩토리 패턴 사용 등
    * 작업하면서 필요없어지는 코드를 정리하거나, 새로운 **메타포**를 도입하여 변경된 설계안을 반영하는 것도 포함됨
        + 같은 기능을 어떤 메타포로 구현하느냐에 따라 설계가 크게 달라짐
    * 리팩토링 과정에서 일어나는 실수는 또 다른 문제이므로, 그것 역시 테스트를 작성해두면 좋음
6. 덧. 그 다음?
    * 코드 린트를 돌려본다.
    * 어떤 테스트들이 추가로 더 필요할지 점검한다.
    * 설계한 것을 검토해본다. (말과 개념이 잘 통하는지, 설계 때문에 제거 못한 중복이 있는지)
    * TDD의 테스트들은 성능 테스트, 스트레스 테스트, 사용성 테스트를 대체하는 것은 아님!
    * 테스트 커버리지 향상? 경우의 수를 세분화함 / 테스트 수는 유지하고 로직을 단순화 etc.