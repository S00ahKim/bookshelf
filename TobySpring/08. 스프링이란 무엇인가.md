# 스프링이란 무엇인가

## 정의
> 자바 엔터프라이즈 개발을 편하게 해주는 오픈소스 경량급 애플리케이션 프레임워크
- 자바 엔터프라이즈 개발을 편하게
    * 개발자는 로우레벨의 기술보다 사용자의 요구사항에 집중할 수 있음
- 애플리케이션 프레임워크
    * 특정 계층/기술/업무 분야에 국한되지 않고 애플리케이션의 전 영역을 포괄함
    * 애플리케이션의 전 영역을 관통하는 일관된 프로그래밍 모델과 핵심 기술을 바탕으로 각 분야의 특성에 맞는 필요를 채워줌
    * 빠르고 효과적으로 애플리케이션을 개발하도록 지원함
- 오픈소스
    * 모두에게 공개되고 자유로운 이용이 가능하여 잠재적 버그가 빠르게 처리됨
    * 별도의 전문 개발진들이 있어 지속적이고 안정적이며 고품질의 개발이 계속됨
- 경량급
    * 불필요하게 무겁지 않음
    * 톰캣/제티 등의 단순한 서버환경에서도 동작(<-> EJB는 고가의 서버와 복잡한 개발환경이 필요했음)

## 목적
- 엔터프라이즈 개발을 편하게 하기
- 원래는 복잡했다
    * 복잡 is not only `양 많음 & 어려움` but also `세부 요소가 이해하기 힘든 방식으로 얽혀 있음`
    * 기술적 제약과 요구가 늘어남 (서버 리소스 효율적으로 쓰고, 기술적인 문제와 서비스 로직을 동시에 고려해야 함)
    * 구현해야 하는 비즈니스 로직이 복잡해짐 (기업 업무는 원래도 복잡한데 점점 빠르게 변화하고 있음)
- 복잡한 것은 제거할 수는 없는 요소다
    * 완화하려면 비즈니스 로직의 복잡함을 다루는 방법, 기술적 복잡함을 다루는 방법이 다르므로 성격이 다른 복잡함을 분리해야 함
- EJB는 환경과 스펙에 종속되는 코딩을 하도록 해서 **객체지향적 특성을 잃은 실패한 해결책**이 되었다.
    * 침투적 기술: 기술을 적용할 때 기술과 관련한 코드/규약이 코드에 등장함
- 스프링은 기술과 비즈니스를 분리하면서 이런 설정이 코드에는 드러나지 않아 성공한 해결책이 되었다.
    * **비침투적 기술**: 애플리케이션 코드에 등장하거나 코드 설계/구현 방법을 제한하지 않음

### 스프링이 선택한 전략
> 자바 언어의 강력한 도구인 OOP를 극대화하도록 돕자!
1. 기술적 문제
    * 기술 접근 방식이 일관성이 없고 특정 환경에 종속적임 => 서비스 추상화
    * 기술 처리를 담당하는 코드가 성격이 다른 코드에 섞여서 등장함 => AOP
2. 비즈니스적 문제
    * 초창기에는 비즈니스 로직의 상당수가 DB에 있었음
    * 점차 DB는 데이터 저장과 검색 등으로 역할이 좁혀짐 & 로직은 애플리케이션 쪽으로 이동함
    * 객체지향 언어의 장점을 살려 비즈니스 로직의 복잡함을 최대한 효과적으로 다루는 깔끔한 코딩
    * by 핵심도구, `OOP` & `DI` (순수한 비즈니스 로직에 이를 적용하는 것이 더 쉬움)

## POJO 프로그래밍
> 분리됐지만 반드시 필요한 엔터프라이즈 서비스 기술을 POJO 방식으로 개발된 애플리케이션 핵심 로직을 담은 코드에 제공한다
- 스프링 = 비즈니스 로직을 담은 `POJO` + POJO의 관계와 동작 정의한 `설계정보`
- 애플리케이션을 POJO로 개발할 수 있게 해주는 가능기술, `IoC/DI`, `AOP`, `PSA`
- POJO의 조건
    * 자바 언어와 꼭 필요한 API 외의 **특정 규약에 종속되지 않는다**
        + (X) EJB: 비즈니스 컴포넌트가 꼭 특정 클래스를 상속해야 함
        + (O) 스프링: 모든 오브젝트가 객체지향 설계의 자유로운 적용이 가능함
    * **특정 환경에 종속되지 않는다**
        + (X) EJB: EJB3는 JNDI라는 서버 서비스를 필요로 함
        + (O) 스프링: 추상적으로 접근하여 환경에 종속되지 않음
- POJO의 장점
    * 깔끔한 코드
    * 개발과 유지보수, 그리고 테스트에 용이함
- 스프링은 기술 영역에만 관여하지 비즈니스 로직을 담당하는 POJO에서는 모습을 감추고 최소한으로 관여한다.
- POJO를 효과적으로 사용하려면 객체지향 분석과 설계, 자바 언어, JVM, JDK API, 디자인 패턴, 리팩토링 기술 등을 학습해야 한다.

## 스프링의 기술
> 스프링은 가능기술, `IoC/DI`, `AOP`, `PSA` 를 프레임워크&컨테이너 라는 방식으로 제공
1. IoC/DI
    - **유연한 확장**을 가능하게 하기 위해 오브젝트를 분리해서 인터페이스로 느슨하게 연결하고 실제 사용할 대상은 DI로 외부에서 지정하는 것이다.
    - DI의 활용 방법
        * 핵심기능의 변경 ex. DAO 구현 방식 변경
        * 핵심기능의 동적인 변경 ex. 조건에 따라 다른 DAO를 사용하게 하기
        * 부가기능의 추가 ex. 트랜잭션 기능 부여
        * 인터페이스의 변경 ex. PSA (다양한 구현을 같은 방식으로 사용하도록 인터페이스 **어댑터** 역할의 레이어를 둠)
        * 프록시 ex. 레이지 로딩 (필요한 시점에 리소스를 준비)
        * 템플릿/콜백
        * DI할 오브젝트의 생명주기 제어 ex. 싱글톤, 오브젝트 스코프(HTTP 요청당 만들어지게 or HTTP 세션당 만들어지게)
        * 테스트 ex. 테스트 대역
2. AOP
    - OOP의 한계와 단점을 극복하도록 도와주는 보조적인 프로그래밍 기술
    - AOP의 적용 방법
        * 다이나믹 프록시 사용 (데코레이터 패턴 응용, 대부분의 경우 사용)
        * 자바 언어의 한계를 넘어서는 언어의 확장 이용 (AspectJ는 다양한 조인 포인트를 제공함)
    - AOP의 적용 단계
        * 스프링이 미리 만들어둔 AOP 이용 ex. `@Transactional` `@Configurable`
            + [@Configurable을 달아주면 객체가 생성됨과 동시에 내부 레퍼런스 오브젝트들이 채워진다 (내부적으로 AspectJ를 활용)](http://egloos.zum.com/springmvc/v/548980)
        * 전담팀을 통한 정책 AOP 적용
            + 소수의 담당자가 애플리케이션 전체적으로 이용 가능한 기능 & 가이드라인을 제공함
            + ex. 보안, 작업 기록 로깅, 데이터 추적을 위한 트레이싱, 특정 구간의 실시간 성능 모니터링 등
        * AOP의 자유로운 이용
            + 개발자 스스로 작은 구현에 적용하면 유용할 세부 AOP 를 이용
3. PSA (포터블 서비스 추상화)
    - 환경과 세부 기술의 변화와 관계없이 일관된 방식으로 기술에 접근할 수 있게 함
    - 설정으로 기술 종류만 지정하면 직접 서비스를 이용하지 않고도 사용 가능
    - 기본적으로 DI를 사용한 방법이므로 이를 적극 활용하여 개발하자