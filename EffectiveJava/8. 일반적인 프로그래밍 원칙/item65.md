# 리플렉션보다는 인터페이스를 사용하라

## 리플렉션
- `java.lang.reflect`
- 동적으로 클래스를 사용해야할 때 (컴파일 타임에 무슨 클래스를 사용할지 모르고, 런타임에 알 수 있는 경우)
- Reflection으로 가져올 수 있는 정보 : Class, Constructor, Method, Field
    * 클래스의 멤버 이름, 필드 타입, 메서드, 시그니처 등에 접근 가능
    * 실제 생성자, 메서드, 필드를 조작할 수 있음

### 단점
- 컴파일타임 타입 검사가 주는 이점을 하나도 누릴 수 없음
    * 존재하지 않는 혹은 접근할 수 없는 메서드를 호출하려 시도하면 런타임 오류가 발생
    * 타입 검사만 했어도 발생하지 않았을 예외들을 수없이 발생시킬 수 있음
- 코드가 지저분하고 장황해짐
    * 클래스 이름만으로 인스턴스를 생성해내기 위해 장황한 코딩이 필요함
- 성능이 떨어짐
    * 리플렉션을 통한 메서드 호출은 일반 메서드 호출보다 훨씬 느림

### 제한된 방식으로만 사용할 것
- **런타임에 존재하지 않을 수도 있는 다른 클래스, 메서드, 필드와의 의존성을 관리**할 때
    * ex. 컴파일타임에 이용할 수 없는 클래스를 사용해야만 하는 프로그램
    * 리플렉션은 인스턴스 생성에만 사용
    * **만든 인스턴스는 적절한 인터페이스나 컴파일타임에 알 수 있는 상위 클래스로 형변환해 사용**
- **버전이 여러 개 존재하는 외부 패키지를 다룰** 때
    * 가동할 수 있는 최소한의 환경, 즉 주로 가장 오래된 버전만을 지원하도록 컴파일
    * 이후 버전의 클래스와 메서드 등은 리플렉션으로 접근
    * 접근하려는 새로운 클래스나 메서드가 런타임에 존재하지 않을 수 있다는 사실을 반드시 감안해야 함 (대체 수단 or 축소된 기능 제공 등)