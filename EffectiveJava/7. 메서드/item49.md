# 매개변수가 유효한지 검사하라

## 메서드 작성 권장 순서
1. 어떤 제약이 필요할지 생각하기
    * 제대로 하지 못하면...
        - 수행 중간에 모호한 예외를 던지며 실패
        - 수행에는 문제가 없고 잘못된 결과가 나옴
        - 수행에는 문제가 없고 미래의 어느 순간에 관련 없는 오류가 남
2. 제약 문서화하기
    * 제약을 명시하고, 제약을 어기면 발생하는 에러를 명시한다
3. 메서드 시작 부분에서 명시적으로 검사하기
    * 오류는 가능한 빨리 발생한 곳에서 잡아야 한다.
        - 나중에는 잡기 어렵다.
        - 잡더라도 어디서 발생했는지 알기 어렵다.
    * 빠르고 깔끔하게 예외를 던질 수 있다는 장점이 있다.


## 유용한 검사 기능
- 자바7~ java.util.Objects.requireNonNull (ex. `this.strategy = Objects.requireNonNull(strategy, "전략이 Null 입니다.");`)
- 자바9~ 범위 검사 (ex. `checkFromIndexSize`, `checkFromToIndex`, `checkIndex`)
    * 예외 메시지는 따로 지정할 수 없음
    * 리스트, 배열 전용으로 설계됨
    * 양 끝단 값을 포함하는 범위는 다루지 못함
- assert
    ```java
    void doParty(String title, int friendCount) {
        assert title != null;
        assert friendCount > 0;

        // 파티 즐기기...
    }
    ```
    * 메서드 작성자가 메서드의 실행 환경을 명시적으로 지정해주는 방식
    * assert 뒤의 단언문들이 무조건 참이라고 선언
    * 실패하면 AssertionError를 던진다.
    * 실행할 때 -ea (--enableassertions) 플래그를 설정하지 않는 한 실제로 기능하진 않는다.


## 주의점들
- 메서드가 직접 사용하는 것은 아니지만 나중에 쓰기 위해 받는 매개변수는 원활한 디버깅을 위해 특히 신경 써서 검사해야 한다. (ex. 생성자)
- 유효성 검사 비용이 지나치게 높은 경우와 같이 예외적인 경우에는 생략할 수 있다.
- 로직 수행 과정에서 암묵적으로 제약이 검사될 경우 생략할 수 있다. 단, 너무 의존하면 실패 원자성(item76)을 해칠 수 있다.
- 로직 수행 과정에서 문서화한 예외와 다른 예외를 던질 수 있다. 예외 번역 관용구(item73)로 문서화한 예외로 번역해야 한다.
- 꼭 필요한 제약에 대해 검사는 필요하지만, 메서드는 최대한 범용적으로 설계하는 것이 좋다.