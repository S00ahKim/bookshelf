# 분산 시스템을 위한 유일 ID 생성기 설계

### 왜 auto_increment는 안 되나
- 분산 환경에서는 어렵다
- 지연 시간을 낮추기 어렵다

### 방법론들
1. 다중 마스터 복제
    * 다음 아이디 = 가장 나중 아이디 + 서버 대수
    * 규모 확장이 어렵고, 시간 흐름에 맞춰 값이 커지게 할 수 없다.
2. UUID
    * 컴퓨터 시스템에 저장되는 정보를 유일하게 식별하기 위한 128비트짜리 수
    * 요구사항(64비트)보다 길다
3. 티켓 서버
    * auto_increment 기능을 갖춘 DB서버(=티켓 서버)를 중앙 집중형으로 하나만 사용
    * 티켓 서버가 SPOF의 가능성
4. 트위터 스노플레이크 접근법
    * 생성해야 하는 아이디 구조를 여러 섹션으로 분할
    * 타임스탬프의 시작 시간을 현재에 가깝게 맞추어 오버플로 발생 시점을 늦추자
    * 69년이 지나면 기원 시각을 바꾸거나 ID체계를 이전해야 한다


### 밑줄
- ID는 숫자로만 구성되나요? (p.118)
- 이번 설계는 하나의 서버가 여러 코어에서 실행될 경우 유효하지 않을 수 있다. 시계를 동기화하는 보편적 방법은 NTP다. (p.124)