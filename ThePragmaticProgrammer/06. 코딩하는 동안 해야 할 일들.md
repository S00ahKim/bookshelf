# 코딩하는 동안 해야 할 일들
> 코딩은 기계적인 작업이 아니다. 정확하게 생산적으로 작동하면서 오래 유지하는 프로그램을 개발하려면 좋은 생각과 판단이 필요하다.


## 왜 잘 돌아가는지 알기
> 우연에 맡기는 프로그래밍을 하지 말라!
- 왜 잘 돌아가지 않게 되는지 모른다는 것은 왜 잘 돌아가는지도 몰랐기 때문이다.
    * **우연적 맥락과 암묵적인 가정을 피하라**
- 지금 잘 돌아가는데 괜히 건드려서 일을 만들 필요가 있을까? 있다!
    * 잘 돌아가는 것처럼 보이는 것일지도 모른다
    * 의존하는 조건이 우연이었을지도 모른다
    * 문서화되지 않은 동작은 다음 릴리즈에서 변경될지 모른다
    * 불필요한 추가 호출로 코드가 느려져있을지 모른다
    * 새로운 버그가 발견될지 모른다
- 타인이 호출할 코드를 작성할 때에는 기본 원칙에 더더욱 충실하고, 타인의 코드를 호출할 때에는 문서에 의존한다.
- 의도적으로 프로그래밍한다.
    * **내가 무엇을 하고 있는지 알 것**
    * 완전하게 알지 못하는 애플리케이션을 빌드하거나 익숙하지 않은 기술을 사용하려고 하지 말 것
    * 계획을 세우고 그것을 바탕으로 진행할 것
    * 신뢰할 수 있는 것에만 기댈 것
    * 가정한 것에 대해 문서로 남길 것 (소통하는 데 도움이 됨 & 스스로 명확히하는 데 도움이 됨)
    * 코드와 가정한 것 모두를 테스트할 것
    * 중요한 것에 먼저 시간을 투자할 것 (보통 중요한 것이 어렵다)
    * 더이상 적절한 코드가 아니라면, 어떤 코드라도 교체할 것! (과거에 매몰되지 말자)


## 알고리즘의 속도 파악
> 알고리즘이 사용하는 자원, 시간, 프로세서, 메모리 등을 추정하라
- 대부분의 알고리즘은 가변적인 입력 데이터를 다룬다.
- O(n)은 상한값을 정하는 표기법: 예상되는 입력 데이터로 실행 시간 등을 추정해본다.
- 더 효율적인 방법은 없는지 고민해본다. (영향을 미칠 수 있는 요소들을 바꾸어 가면서 직접 실행)
- 추정을 이미 했어도 실제로 현장에서 돌아가는 수행시간이 가장 의미있는 수치다.
- 성급한 최적화로 알고리즘을 위한 데이터 준비 시간을 지나치게 사용하는 등 더 큰 비용을 쓰는 건 아닌지 점검한다.


## 리팩토링
- 코드는 발전해야 한다.
- 코드는 유기적이다.
- 잘못되었음(ex. `중복`, `나쁜 설계`, `지난 지식`, `성능` 등)을 발견했을 때, 변경하는 일을 주저하면 안 된다.
    * 새로운 사실이 밝혀지거나, 문제에 대한 이해가 깊어지거나, 요구사항이 바뀌는 등의 상황
- 일찍 리팩토링하고, 자주 리팩토링한다.
- 리팩토링의 본질은 재설계다.
- 천천히, 신중히, 조심스럽게 진행한다.
    * 새로운 기능 추가와 리팩토링을 동시에 하지 말 것
    * 리팩토링 전에 테스트 집합을 마련할 것
    * 단계를 작게 나누어 신중하게 작업할 것 (단계가 끝날 때마다 테스트하기)
- 리팩토링 전의 코드에 의존하는 코드는 컴파일이 안 되도록 처리하면 쉽게 에러를 찾을 수 있다.
- 지금 고통스럽더라도 앞으로 더욱 고통스러울 것 같다면 지금 고치는 것이 낫다.


## 테스트하기 쉬운 코드
- 소프트웨어 컴포넌트도 조립해서 쓸 수 있어야 한다.
- 모듈은 통제된 환경에서 철저하게 테스트하여 더 넓은 환경에서 어떻게 동작할지 감을 잡는다.
- 모듈의 하위 컴포넌트를 모두 검증하고 난 뒤에 모듈을 테스트할 수 있다.
- 테스트를 염두에 두고 설계한다.
    * TDD: 구현 전에 테스트를 먼저 만들어서 코드의 인터페이스가 고정되기 전에 미리 시험한다.
- 계약을 잘 지키는지 테스트한다.
    * 코드가 계약을 지키는지 확인
    * 코드로 표현된 계약의 의미가 우리가 생각한 것과 일치하는지 확인
- 단위 테스트를 작성한다.
    * 모듈의 기능을 어떻게 이용하는지 보여주는 예제
    * 코드 변경시 검증하기 위한 테스트
- 많은 테스트 코드를 작성하게 되므로, 적절한 장치를 사용한다.
    * 공통적인 기능을 제공하는 기반 클래스를 만들어서 개별 테스트가 상속하게 하기
    * 공통 코드: setup, cleanup, 결과 분석, 실패 보고 등의 기능 필요
- **개발 중 임시로 만든 테스트를 실제 테스트로 만든다**.
- 배포한 뒤에도 테스트해야 하는 경우가 있다.
    * 로그 남기기
    * 핫 키 제공 (특정 단축키로 디버깅 모드 진입)
- 테스트는 기술적이기보다 문화적이다. 테스트 문화를 도입한다.


## 코드 생성기가 만든 코드는 이해할 수 있는 것만 수용한다
- 애플리케이션을 작성하는 것도, 애플리케이션 자체도 갈수록 복잡해진다.
- 애플리케이션의 주인이 되어야 한다. (유지보수 가능, 손쉬운 디버깅 등)
- 개발자라면 으레 완벽히 이해하지 못하는 것에 의존하기 마련이지만, 코드 레벨의 경우 레이어가 낮아 작성자에 가깝다.