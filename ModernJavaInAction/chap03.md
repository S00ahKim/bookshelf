# 람다 표현식

## 람다란?
- 익명 함수의 단순화
- 파라미터, 화살표, 바디로 이루어짐
    * `(parameters) -> expression` (표현식 스타일)
    * `(parameters) -> { statements; }` (블록 스타일)
- 함수형 인터페이스의 추상 메서드 구현을 직접 전달할 수 있음
    * = 전체 표현식을 함수형 인터페이스의 인스턴스로 취급
    * 함수형 인터페이스? 추상 메서드가 오직 하나인 인터페이스
- 함수형 인터페이스의 시그니처와 람다의 시그니처(=함수 디스크립터)는 같아야 함


## 함수형 인터페이스
- 자바 8 설계자들은 java.util.function 패키지로 여러 함수형 인터페이스 제공
    * Predicate
        + `(List<String> list) -> list.isEmpty()` 는 `Predicate<List<String>>`에 대응
    * Consumer
        + `(Apple a) -> System.out.println(a.getWeight())` 는 `Consumer<Apple>`에 대응
    * Function
    * 등등
- 기본형 특화된 인터페이스를 추가 제공: 변환 비용이 드는 박싱을 하지 않도록 함


## 주의점들
- 콘텍스트로 람다 표현식의 시그니처(파라미터 타입, 리턴 타입 등)를 추론할 수 있다.
- 외부 변수를 사용할 수 있음 (람다 캡처링)
    * 인스턴스 변수 / 정적 변수 / 명시적으로 final이거나 final처럼 취급되는 지역 변수
    * 인스턴스 변수는 힙에, 지역 변수는 스택에 저장되는데, 람다가 스레드에서 실행되면 지역 변수를 할당한 스레드가 사라져 변수 할당이 해제되었는데도 람다를 실행하는 스레드가 해당 변수를 참조하려고 하는 문제가 있을 수 있음. 자바 구현에서는 이를 방지하기 위해 지역 변수의 복사본을 제공하므로 값이 바뀌지 않아야 한다는 제약이 있음.


## 메서드 참조
- 특정 메서드만을 호출하는 람다의 축약형
- 기존의 메서드 정의를 재활용해서 람다처럼 전달할 수 있음
- 실제로 호출하는 것이 아니라 괄호는 불필요함 (ex. `Apple::getWeight`)
- 메서드 참조 역시 콘텍스트의 형식과 일치해야 함
- 종류
    * 정적 메서드 참조
    * 다양한 형식의 인스턴스 메서드 참조
    * 기존 객체의 인스턴스 메서드 참조
- 자바 8 이전에 비해 짧고 명확해진 코드 작성 가능


## 람다 표현식 조합
- 간단한 여러 람다식을 조합해 복잡한 람다식을 만들 수 있음
- 함수형 인터페이스의 정의에 어긋나지 않는 이유? **디폴트 메서드**
- 비교할 때 같은 값을 처리하는 방법, 특정 조건의 반전, 합성함수 사용 가능