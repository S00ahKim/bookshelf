# 스트림 소개
> **데이터 처리 연산을 지원하도록 소스에서 추출된 연속된 요소**
- 스트림 API는 자바 8에 도입됨
- cf. 기타 라이브러리: Guava (by 구글, multimap, multiset 등의 추가적인 컨테이너 클래스 제공)

## 사용 방법
- 다음 요소들을 결합한다.
    * 질의를 수행할 데이터 소스
    * 스트림 파이프라인을 구성할 중간 연산 연결
    * 스트림 파이프라인을 실행하고 결과를 만들 최종 연산
- 빌더 패턴과 유사하다.

## 주요 특징
- **선언형**으로 컬렉션 데이터를 처리
    * 동작 구현 방법이 아니라 무엇을 할지만 지정
    * 더 간결하고 가독성이 좋음
- 스트림은 소스에서 **순차적으로 데이터를 소비**하며, 이때 순서는 유지됨
- 순차 처리 뿐 아니라, 멀티스레드 코드 **구현 없이** 병렬 처리 가능
    * 보다 간편하게 좋은 성능을 낼 수 있음
    * 연산이 `고수준 빌딩 블록`으로 이루어져 특정 스레딩 모델에 제한받지 않아서 병렬 처리시 스레드와 락 걱정 안해도 됨
- **파이프라이닝**을 지원하여 조립할 수 있음
    * 중간 연산: 연결 가능한 스트림 연산 (ex. filter, map 등)
        + 스트림을 반환한다. 그래서 스트림 연산끼리 연결해서 커다란 파이프라인을 구성할 수 있다.
        + 최종 연산 실행 전에는 아무 연산도 수행 안함
    * 최종 연산: 스트림을 닫는 연산 (ex. collect)
    * 연산들은 게으르기(laziness) 때문에 최적화 가능하다.
        + 쇼트서킷(리밋 있으면 빨리 끝냄)
        + 루프 퓨전(서로 다른 연산이 한 과정으로 병합)

## 컬렉션과의 차이점
- 컬렉션은 `소스`다. 스트림은 `소스에서 추출`한다. 스트림은 일종의 *게으르게 만들어지는* 컬렉션이다.
- 관심사
    * 컬렉션은 자료구조로, `데이터의 저장과 접근`이 주된 관심사다.
    * 스트림은 `계산`이 주된 관심사다.
- 데이터를 언제 계산하는가?
    * 컬렉션은 현재 자료구조가 포함하는 `모든 값을 메모리에 저장`하는 자료구조다.
    * 스트림은 이론적으로 `요청할 때만 요소를 계산`하는 고정된 자료구조다.
        + 스트림에는 요소를 추가하거나 제거할 수 없다. 
        + 스트림은 딱 한번 탐색할 수 있다.
- 데이터를 어떻게 반복하는가?
    * 컬렉션 인터페이스를 사용하려면 사용자가 반복자 등으로 요소를 반복하는 `외부 반복`을 사용한다.
        + 외부 반복은 병렬성을 스스로 관리해야 한다. synchronized를 쓰는 등.
    * 스트림 라이브러리는 반복을 알아서 처리하고 결과 스트림값을 어딘가에 저장해주는 `내부 반복`을 사용한다.
        + 최적화된 순서로 처리할 수 있다.
        + 데이터 표현과 하드웨어를 활용한 병렬성 구현을 자동으로 선택한다.